
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "tutorial/02_mesh/b_create-point-cloud.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_tutorial_02_mesh_b_create-point-cloud.py>`
        to download the full example code or to run this example in your browser via Binder

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_tutorial_02_mesh_b_create-point-cloud.py:


.. _create_point_cloud:

Create Point Cloud
~~~~~~~~~~~~~~~~~~

Create a :class:`pyvista.PolyData` object from a point cloud of vertices and
scalar arrays for those points.

.. GENERATED FROM PYTHON SOURCE LINES 11-16

.. code-block:: default


    import numpy as np
    import pyvista as pv
    from pyvista import examples








.. GENERATED FROM PYTHON SOURCE LINES 17-22

Point clouds are generally constructed in the :class:`pyvista.PolyData` class
and can easily have scalar/vector data arrays associated with the point
cloud. In this example, we'll work a bit backwards using a point cloud that
that is available from our ``examples`` module. This however is no different
than creating a PyVista mesh with your own NumPy arrays of vertice locations.

.. GENERATED FROM PYTHON SOURCE LINES 22-37

.. code-block:: default



    # Define some helpers - ignore these and use your own data if you like!
    def generate_points(subset=0.02):
        """A helper to make a 3D NumPy array of points (n_points by 3)"""
        dataset = examples.download_lidar()
        ids = np.random.randint(low=0, high=dataset.n_points - 1, size=int(dataset.n_points * subset))
        return dataset.points[ids]


    points = generate_points()
    # Print first 5 rows to prove its a numpy array (n_points by 3)
    # Columns are (X Y Z)
    points[0:5, :]





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    pyvista_ndarray([[4.81066875e+05, 4.40015500e+06, 1.77234998e+03],
                     [4.81058875e+05, 4.40018320e+06, 1.75926001e+03],
                     [4.80964375e+05, 4.40011930e+06, 1.76267004e+03],
                     [4.81041775e+05, 4.40010250e+06, 1.76197998e+03],
                     [4.81011175e+05, 4.40022180e+06, 1.75814001e+03]])



.. GENERATED FROM PYTHON SOURCE LINES 38-40

Now that you have a NumPy array of points/vertices either from our sample
data or your own project, creating a PyVista mesh of those points:

.. GENERATED FROM PYTHON SOURCE LINES 40-44

.. code-block:: default


    # insert your code here (answer below)
    point_cloud = ...








.. GENERATED FROM PYTHON SOURCE LINES 45-48

.. code-block:: default

    point_cloud = pv.PolyData(points)
    point_cloud






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">

    <table>
    <tr><th>PolyData</th><th>Information</th></tr>
    <tr><td>N Cells</td><td>67841</td></tr>
    <tr><td>N Points</td><td>67841</td></tr>
    <tr><td>X Bounds</td><td>4.809e+05, 4.811e+05</td></tr>
    <tr><td>Y Bounds</td><td>4.400e+06, 4.400e+06</td></tr>
    <tr><td>Z Bounds</td><td>1.754e+03, 1.787e+03</td></tr>
    <tr><td>N Arrays</td><td>0</td></tr>
    </table>


    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 49-50

And we can even do a sanity check

.. GENERATED FROM PYTHON SOURCE LINES 50-52

.. code-block:: default

    np.allclose(points, point_cloud.points)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    True



.. GENERATED FROM PYTHON SOURCE LINES 53-56

And now that we have a PyVista mesh, we can plot it. Note that we add an
option to use eye dome lighting - this is a shading technique to improve
depth perception with point clouds (learn more about `EDL <https://docs.pyvista.org/examples/02-plot/edl.html>`_).

.. GENERATED FROM PYTHON SOURCE LINES 56-58

.. code-block:: default

    point_cloud.plot(eye_dome_lighting=True)




.. image-sg:: /tutorial/02_mesh/images/sphx_glr_b_create-point-cloud_001.png
   :alt: b create point cloud
   :srcset: /tutorial/02_mesh/images/sphx_glr_b_create-point-cloud_001.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 59-67

Now what if you have data attributes (scalar/vector arrays) that you'd like
to associate with every node of your mesh? You can easily add NumPy data
arrays that have a length equal to the number of points in the mesh along the
first axis. For example, lets add a few arrays to this new ``point_cloud``
mesh.

Make an array of scalar values with the same length as the points array.
Each element in this array will correspond to points at the same index:

.. GENERATED FROM PYTHON SOURCE LINES 67-71

.. code-block:: default


    # Make data array using z-component of points array
    data = points[:, -1]








.. GENERATED FROM PYTHON SOURCE LINES 72-73

Add that data to the mesh with the name "elevation"

.. GENERATED FROM PYTHON SOURCE LINES 73-76

.. code-block:: default


    # (add your code here, answer below)








.. GENERATED FROM PYTHON SOURCE LINES 77-79

.. code-block:: default

    point_cloud["elevation"] = data








.. GENERATED FROM PYTHON SOURCE LINES 80-83

And now we can plot the point cloud with that random data. PyVista is smart
enough to plot the scalar array you added by default. Note that this time,
we specify to render every point as its own sphere.

.. GENERATED FROM PYTHON SOURCE LINES 83-85

.. code-block:: default

    point_cloud.plot(render_points_as_spheres=True)




.. image-sg:: /tutorial/02_mesh/images/sphx_glr_b_create-point-cloud_002.png
   :alt: b create point cloud
   :srcset: /tutorial/02_mesh/images/sphx_glr_b_create-point-cloud_002.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 86-92

That data is kind of boring, right? You can also add data arrays with
more than one scalar value - perhaps a vector with three elements? Let's
make a little function that will compute vectors for every node in the point
cloud and add those vectors to the mesh.

This time, we're going to create a totally new, random point cloud.

.. GENERATED FROM PYTHON SOURCE LINES 92-109

.. code-block:: default


    # Create random XYZ points
    points = np.random.rand(100, 3)
    # Make PolyData
    point_cloud = pv.PolyData(points)


    def compute_vectors(mesh):
        origin = mesh.center
        vectors = mesh.points - origin
        vectors = vectors / np.linalg.norm(vectors, axis=1)[:, None]
        return vectors


    vectors = compute_vectors(point_cloud)
    vectors[0:5, :]





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    pyvista_ndarray([[-0.21417478,  0.973724  ,  0.0773998 ],
                     [-0.03761486,  0.68439183,  0.7281435 ],
                     [ 0.60859974,  0.13002911,  0.78275078],
                     [-0.33243338,  0.22942071, -0.91479735],
                     [-0.81887251,  0.56648922,  0.09240015]])



.. GENERATED FROM PYTHON SOURCE LINES 110-111

Add the vector array as point data to the mesh:

.. GENERATED FROM PYTHON SOURCE LINES 111-114

.. code-block:: default


    # add your code here (answer below)








.. GENERATED FROM PYTHON SOURCE LINES 115-117

.. code-block:: default

    point_cloud['vectors'] = vectors








.. GENERATED FROM PYTHON SOURCE LINES 118-120

Now we can make arrows using those vectors using the glyph filter
(see `this example <https://docs.pyvista.org/examples/01-filter/glyphs.html>`_ for more details).

.. GENERATED FROM PYTHON SOURCE LINES 120-135

.. code-block:: default


    arrows = point_cloud.glyph(
        orient='vectors',
        scale=False,
        factor=0.15,
    )

    # Display the arrows
    plotter = pv.Plotter()
    plotter.add_mesh(point_cloud, color='maroon', point_size=10.0, render_points_as_spheres=True)
    plotter.add_mesh(arrows, color='lightblue')
    # plotter.add_point_labels([point_cloud.center,], ['Center',],
    #                          point_color='yellow', point_size=20)
    plotter.show_grid()
    plotter.show()



.. image-sg:: /tutorial/02_mesh/images/sphx_glr_b_create-point-cloud_003.png
   :alt: b create point cloud
   :srcset: /tutorial/02_mesh/images/sphx_glr_b_create-point-cloud_003.png
   :class: sphx-glr-single-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  3.514 seconds)


.. _sphx_glr_download_tutorial_02_mesh_b_create-point-cloud.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example


  .. container:: binder-badge

    .. image:: images/binder_badge_logo.svg
      :target: https://mybinder.org/v2/gh/pyvista/pyvista-tutorial/gh-pages?urlpath=lab/tree/notebooks/tutorial/02_mesh/b_create-point-cloud.ipynb
      :alt: Launch binder
      :width: 150 px


  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: b_create-point-cloud.py <b_create-point-cloud.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: b_create-point-cloud.ipynb <b_create-point-cloud.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
